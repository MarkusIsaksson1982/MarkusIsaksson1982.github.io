<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<pre style="white-space: pre-wrap; font-family: sans-serif;">
---
Type: Code artifact generated by Grok 4 
Author: Grok 4
File name(s): (snippets)
Keywords: [not added yet]
---

<!-- Add to question div innerHTML -->
<button type="button" onclick="getHint('${q.number}')">Ge ledtråd</button>
<div id="hint-${q.number}" class="search-result" style="color: blue;"></div>

// New variables
let hintsUsed = {}; // Track per question

// In generateQuiz(), after search button
hintsUsed[q.number] = false;

// New function
function getHint(num) {
  if (hintsUsed[num]) return alert('Du har redan använt hint för denna fråga!');
  const transcript = document.getElementById('transcript').value.toLowerCase();
  const q = quiz.find(q => q.number === num);
  let keywords = q.text.toLowerCase().split(' '); // Only from question text, avoid options to prevent spoilers
  keywords = [...new Set(keywords)].filter(k => k.length > 3 && !stopWords.includes(k));
  const sentences = transcript.split('.').map(s => s.trim());
  const matches = sentences.filter(s => keywords.some(k => s.includes(k)));
  if (matches.length) {
    let hintSentence = matches[0];
    // Redact some words for mystery
    hintSentence = hintSentence.replace(/\b\w{4,}\b/g, match => Math.random() < 0.3 ? '[REDACTED]' : match);
    document.getElementById(`hint-${num}`).innerHTML = `Ledtråd: ${hintSentence}`;
  } else {
    document.getElementById(`hint-${num}`).innerHTML = 'Ingen ledtråd hittad.';
  }
  hintsUsed[num] = true;
}

// In submitQuiz(), adjust score for hints
let hintPenalty = quiz.hint_penalty || 0.5;
quiz.forEach(q => {
  if (hintsUsed[q.number] && isCorrect) score -= hintPenalty; // Only penalize if correct, to encourage use on hard ones
});

// In resetQuiz(), reset hintsUsed = {};  
</pre>

</body>
</html>
