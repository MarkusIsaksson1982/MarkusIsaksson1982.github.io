<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<pre style="white-space: pre-wrap; font-family: sans-serif;">
---
Type: Code artifact generated by Grok 4 
Author: Grok 4
File name(s): Nyhetskoll-Quiz-App.html (updated version)
Keywords: [not added yet]
---

<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Nyhetskoll Quiz App - Vecka 37</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #f0f0f0; }
    .question { margin-bottom: 20px; padding: 15px; border-radius: 10px; background: rgba(255,255,255,0.5); backdrop-filter: blur(10px); box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; }
    .question.answered { border-left: 5px solid #2196f3; }
    .question.correct { border-left: 5px solid #4caf50; }
    .question.incorrect { border-left: 5px solid #f44336; }
    .option { margin-left: 20px; }
    #transcript { width: 100%; height: 200px; margin-bottom: 20px; border: 1px solid #ddd; padding: 10px; }
    #score { font-weight: bold; color: #333; }
    .search-result { margin-top: 10px; background: #fff; padding: 10px; border-radius: 5px; }
    .highlight { background: yellow; }
    #progress { width: 100%; height: 10px; background: #ddd; margin-bottom: 20px; }
    #progress-bar { height: 100%; background: #4caf50; width: 0; transition: width 0.3s; }
    @media (max-width: 600px) { body { padding: 10px; } }
  </style>
</head>
<body>
  <h1>Nyhetskoll Quiz App - Vecka 37</h1>
  <p>Använd för interaktivt quiz och transkriptanalys. Ladda nytt quiz för andra episoder!</p>
  
  <input type="file" id="quiz-file" onchange="loadQuiz()">
  <button onclick="loadSampleQuiz()">Ladda exempelquiz</button>
  <textarea id="transcript" placeholder="Klistra in transkriptet här..."></textarea>
  
  <div id="progress"><div id="progress-bar"></div></div>
  
  <form id="quiz-form"></form>
  
  <button onclick="submitQuiz()">Skicka in och betygsätt</button>
  <button onclick="exportResults()">Exportera resultat</button>
  <p id="score"></p>
  
  <script>
    let quiz = [
      {number: "1", text: "Vad heter högerdebattören som sköts till döds förra veckan?", options: {A: "Tyler Robinson", B: "Charlie Kirk", C: "Tucker Carlson"}, is_multiple: false, correct: ["B"]},
      {number: "2", text: "Vapenlagarna i USA står i the second amendment som finns i The Bill of Rights, som i sin tur är ett tillägg till konstitutionen. Vad är konstitutionen?", options: {A: "riksdagen", B: "grundlagen", C: "senaten"}, is_multiple: false, correct: ["B"]},
      {number: "3", text: "Vad visar en ny brasiliansk studie om sötningsmedel och vad säger Livsmedelsverket om det här?", options: {A: "Studien visar att det inte går att dra några slutsatser av studien, men att allt tyder på att man inte behöver vara orolig. Livsmedelsverket säger däremot att sötningsmedel kan försämra hjärnans förmåga att ta emot och bearbeta information.", B: "Studien visar att sötningsmedel kan försämra hjärnans förmåga att ta emot och bearbeta information. Livsmedelsverket säger däremot att fler studier behövs och att man inte behöver vara orolig.", C: "Både studien och Livsmedelsverket väger att sötningsmedel kan försämra hjärnans förmåga att ta emot och bearbeta information."}, is_multiple: false, correct: ["B"]},
      {number: "4", text: "Regeringen har kommit med förslag på att polisen ska få använda hemliga tvångsmedel mot barn under 15 år. Vilka alternativ nedan är exempel på hemliga tvångsmedel? Alla alternativ som stämmer behöver väljas för att få rätt på frågan.", options: {A: "fotboja", B: "avlyssning", C: "kameraövervakning"}, is_multiple: true, correct: ["B", "C"]},
      {number: "5", text: "Barn och unga kan få bidrag för att hålla på med fritidsaktiviteter inom kultur och idrott. Det kallas fritidskortet. Hur mycket pengar handlar det om?", options: {A: "500 kronor i månaden", B: "500 kronor per år", C: "500 kronor per termin"}, is_multiple: false, correct: ["B"]},
      {number: "6", text: "Vad visar en ny rapport från CAN, Centralförbundet för alkohol- och narkotikaupplysning?", options: {A: "Färre unga knarkar.", B: "Det är mycket svårare att få tag på narkotika idag.", C: "Fler personer under 30 år misstänks för narkotikabrott nu jämfört med innan pandemin."}, is_multiple: false, correct: ["A"]},
      {number: "7", text: "Vad krävs för att få rösta i kyrkovalet nu på söndag? Alla alternativ som stämmer behöver väljas för att få rätt på frågan.", options: {A: "Man är medlem i Svenska kyrkan.", B: "Man är svensk medborgare.", C: "Man är folkbokförd i Sverige.", D: "Man är myndig.", E: "Man har fyllt 16 år senast på valdagen."}, is_multiple: true, correct: ["A", "C", "E"]},
      {number: "8", text: "Nu kommer en rapport som anklagar Israel för att begå folkmord i Gaza. Vem eller vilka står bakom rapporten?", options: {A: "Läkare Utan Gränser", B: "EU", C: "FN"}, is_multiple: false, correct: ["C"]},
      {number: "9", text: "Vad är folkmord, enligt FN:s folkmordskonvention?", options: {A: "Folkmord innebär att minst en av fem handlingar begås med avsikt att helt eller delvis förgöra en grupp. Två av handlingarna nämns i programmet; att döda medlemmar av gruppen och att skapa levnadsförhållanden som gör att personer dör.", B: "Folkmord innebär att fem av fem handlingar begås med avsikt att helt eller delvis förgöra en grupp. Två av handlingarna nämns i programmet; att döda medlemmar av gruppen och att skapa levnadsförhållanden som gör att personer dör."}, is_multiple: false, correct: ["A"]},
      {number: "10", text: "Varför har Spanien, Irland, Nederländerna, Slovenien och Island sagt att de inte kommer att vara med i Eurovision Song Contest 2026?", options: {A: "Om kostnaden för att delta ökar för mycket.", B: "Om Israel tillåts delta i tävlingen.", C: "Om Ryssland tillåts delta i tävlingen."}, is_multiple: false, correct: ["B"]},
      {number: "11", text: "Veckans program tog upp attacker mot civila där över 50 personer dödades i veckan. Vilket land gäller det?", options: {A: "Haiti", B: "Dominikanska republiken", C: "Myanmar"}, is_multiple: false, correct: ["A"]},
      {number: "12", text: "Stavhopparen Armand Duplantis slog världsrekord för 14:e gången i veckan. Hur högt hoppade han?", options: {A: "5.30 meter", B: "6.30 meter", C: "7.30 meter"}, is_multiple: false, correct: ["B"]}
    ];
    const stopWords = ['och', 'att', 'i', 'på', 'för', 'med', 'av', 'en', 'ett', 'som', 'det', 'är', 'till'];

    function generateQuiz() {
      const form = document.getElementById('quiz-form');
      form.innerHTML = '';
      quiz.forEach(q => {
        const div = document.createElement('div');
        div.className = 'question';
        div.id = `q-div-${q.number}`;
        div.innerHTML = `<strong>${q.number}. ${q.text}</strong>`;
        for (const key in q.options) {
          div.innerHTML += `<div class="option"><input type="${q.is_multiple ? 'checkbox' : 'radio'}" name="q${q.number}" value="${key}" onchange="updateProgress()">${key}. ${q.options[key]}</div>`;
        }
        div.innerHTML += `<button type="button" onclick="searchTranscript('${q.number}')">Sök i transkript</button><div id="search-${q.number}" class="search-result"></div><div id="explain-${q.number}"></div>`;
        form.appendChild(div);
      });
      updateProgress();
    }

    function updateProgress() {
      const answered = quiz.filter(q => document.querySelectorAll(`input[name="q${q.number}"]:checked`).length > 0).length;
      document.getElementById('progress-bar').style.width = `${(answered / quiz.length) * 100}%`;
      quiz.forEach(q => {
        const div = document.getElementById(`q-div-${q.number}`);
        if (document.querySelectorAll(`input[name="q${q.number}"]:checked`).length > 0) div.classList.add('answered');
      });
    }

    function submitQuiz() {
      let score = 0;
      let results = [];
      quiz.forEach(q => {
        const selected = Array.from(document.querySelectorAll(`input[name="q${q.number}"]:checked`)).map(input => input.value);
        selected.sort();
        q.correct.sort();
        const isCorrect = selected.toString() === q.correct.toString();
        if (isCorrect) score++;
        const div = document.getElementById(`q-div-${q.number}`);
        div.classList.remove('answered');
        div.classList.add(isCorrect ? 'correct' : 'incorrect');
        const explainDiv = document.getElementById(`explain-${q.number}`);
        explainDiv.innerHTML = isCorrect ? '' : `Rätt svar: ${q.correct.join(', ')}. Förklaring från transkript: <br>${getExplanation(q)}`;
        results.push({question: q.number, selected, correct: q.correct, isCorrect});
      });
      document.getElementById('score').innerText = `Poäng: ${score} / ${quiz.length}`;
      return results;
    }

    function getExplanation(q) {
      const transcript = document.getElementById('transcript').value.toLowerCase();
      const keywords = q.correct.map(c => q.options[c].toLowerCase().split(' ')).flat();
      const sentences = transcript.split('.').map(s => s.trim());
      const matches = sentences.filter(s => keywords.some(k => s.includes(k)));
      return matches.length ? matches.join('<br>') : 'Inga direkta matchningar.';
    }

    function searchTranscript(num) {
      const transcript = document.getElementById('transcript').value.toLowerCase();
      const q = quiz.find(q => q.number === num);
      let keywords = q.text.toLowerCase().split(' ').concat(Object.values(q.options).flatMap(o => o.toLowerCase().split(' ')));
      keywords = [...new Set(keywords)].filter(k => k.length > 3 && !stopWords.includes(k));
      const sentences = transcript.split('.').map(s => s.trim());
      let matches = sentences.filter(s => keywords.some(k => s.includes(k)));
      matches = matches.map(m => keywords.reduce((text, k) => text.replace(new RegExp(k, 'gi'), `<span class="highlight">$&</span>`), m));
      document.getElementById(`search-${num}`).innerHTML = matches.length ? `Hittade: <br>${matches.join('<br>')}` : 'Inga matchningar.';
    }

    function loadQuiz() {
      const file = document.getElementById('quiz-file').files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = e => { quiz = JSON.parse(e.target.result); generateQuiz(); };
        reader.readAsText(file);
      }
    }

    function loadSampleQuiz() {
      // For testing: reload default or fetch new, but here just regenerate
      generateQuiz();
    }

    function exportResults() {
      const results = submitQuiz(); // Re-run to get latest
      const data = JSON.stringify(results);
      const blob = new Blob([data], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'quiz-results.json';
      a.click();
    }

    generateQuiz();
  </script>
</body>
</html>

</pre>
<pre style="white-space: pre-wrap; font-family: sans-serif;">
---
Type: Code artifact generated by Grok 4 
Author: Grok 4
File name(s): [code snippets]
Keywords: [not added yet]
---

/* Enhanced styling */
.question { /* ... existing ... */ border: 1px solid rgba(255,255,255,0.18); }
#help-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.7); backdrop-filter: blur(20px); padding: 20px; border-radius: 10px; box-shadow: 0 8px 32px rgba(0,0,0,0.37); z-index: 10; }
#help-btn { float: right; }

  <button id="help-btn" onclick="toggleHelp()">Hjälp</button>
<div id="help-modal">
  <h2>Hjälp & Guide</h2>
  <p>För nya episoder: Ladda upp JSON med quiz-data. Format: [{number, text, options, is_multiple, correct}]</p>
  <p>Export: Spara resultat som JSON eller CSV för dokumentation.</p>
  <button onclick="toggleHelp()">Stäng</button>
</div>

  function toggleHelp() {
  document.getElementById('help-modal').style.display = document.getElementById('help-modal').style.display === 'none' ? 'block' : 'none';
}

function exportResults(format = 'json') {
  const results = submitQuiz();
  let data, type, ext;
  if (format === 'csv') {
    data = 'Fråga,Svarade,Rätt,Status\n' + results.map(r => `${r.question},"${r.selected.join(',')}","${r.correct.join(',')}",${r.isCorrect ? 'Rätt' : 'Fel'}`).join('\n');
    type = 'text/csv';
    ext = 'csv';
  } else {
    data = JSON.stringify(results);
    type = 'application/json';
    ext = 'json';
  }
  const blob = new Blob([data], {type});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `quiz-results.${ext}`;
  a.click();
}

// Update export button
// Replace <button onclick="exportResults()"> with <button onclick="exportResults('json')">JSON</button> <button onclick="exportResults('csv')">CSV</button>

</pre>

</body>
</html>
