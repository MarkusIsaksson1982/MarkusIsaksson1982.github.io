<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<pre style="white-space: pre-wrap; font-family: sans-serif;">
---
Type: Code artifact generated by Grok 4 
Author: Grok 4
File name(s): (snippets)
Keywords: [not added yet]
---

<!-- Add to head for Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js"></script>


// Init Firebase (add to top of script, replace with your config)
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "your-project.firebaseapp.com",
  databaseURL: "https://your-project-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "your-project",
};
const app = firebase.initializeApp(firebaseConfig);
const db = firebase.database(app);

// Dynamic ref based on week
function getHighscoresRef() {
  return db.ref(`highscores/week_${quiz.week || 'general'}`);
}

// In submitQuiz(), after local highscores update
const ref = getHighscoresRef();
ref.push({name: currentProfile, score, date: new Date().toISOString()}); // Push to cloud

// Listen for real-time updates (add to generateQuiz() or on load)
getHighscoresRef().on('value', (snapshot) => {
  const cloudScores = [];
  snapshot.forEach((child) => {
    cloudScores.push(child.val());
  });
  cloudScores.sort((a,b) => b.score - a.score);
  // Merge with local if needed, but here overwrite for sync
  localStorage.setItem(HIGHSCORES_KEY, JSON.stringify(cloudScores));
  showLeaderboard(); // Update UI instantly
});

// For clearLeaderboard(), also clear cloud
getHighscoresRef().remove().then(() => showLeaderboard());

// Optional: Teacher dashboard - separate page querying all weeks
// e.g., db.ref('highscores').once('value').then(snapshot => exportToCSV(snapshot.val()));
  
</pre>

</body>
</html>
